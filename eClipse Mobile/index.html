<!DOCTYPE html>
<html>
    <head>
        <title>My App</title>
        <meta charset="utf-8" />
        <script src="cordova.js"></script>
        <script src="kendo/js/jquery.min.js"></script>
        <script src="kendo/js/kendo.mobile.min.js"></script>
        <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
        <script src="scripts/hello-world.js"></script>
        <script src="scripts/search.js"></script>
        <script src="scripts/utils.js"></script>
        <script src="scripts/outstandingtasks.js"></script>
        <script src="scripts/entitytasks.js"></script>
        
        <link rel="stylesheet" href="kendo/styles/kendo.mobile.all.min.css" />
        <link rel="stylesheet" href="kendo/styles/kendo.jitterz.mobile.all.css" />
        
        <!-- Default Stylesheet -->
        <link rel="stylesheet" href="styles/main.css" />
        <!-- Phone 320x480 High DPI (aka Retina) -->
		<link rel="stylesheet" media="only screen and (min-device-width: 320px) and (max-device-width: 480px) and (-webkit-device-pixel-ratio:2)" href="styles/phone-480.css" type="text/css" />
        <!-- Phone 480x800 Medium DPI (aka Samsung Galaxy S II Skyrocket) -->
        <link rel="stylesheet" media="only screen and (min-device-width: 320px) and (max-device-width: 508px) and (-webkit-device-pixel-ratio:1.5)" href="styles/phone-800.css" type="text/css" />
        <!-- Tablet 768x1024 Low DPI (aka iPad 1 & 2") -->
        <link rel="stylesheet" media="only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-device-pixel-ratio:1)" href="styles/tablet-1024-ldpi.css" type="text/css" />
        <!-- Tablet 800x1280 Low DPI (aka Samsung Galaxy Tab 8.9" & Lenovo K1) -->
        <link rel="stylesheet" media="only screen and (min-device-width: 800px) and (max-device-width: 1280px) and (-webkit-device-pixel-ratio:1)" href="styles/tablet-1280.css" type="text/css" />=
        <!-- Phone 720x1280 High DPI (aka Google Nexus) -->
        <link rel="stylesheet" media="only screen and (min-device-width: 720px) and (max-device-width: 1280px) and (-webkit-device-pixel-ratio:2)" href="styles/phone-1280.css" type="text/css" />
		<!-- Tablet 500x1024 Low DPI (aka Kindle Fire) -->
        <link rel="stylesheet" media="only screen and (min-device-width: 600px) and (max-device-width: 1024px) and (-webkit-device-pixel-ratio:1)" href="styles/tablet-600-1024.css" type="text/css" />
        <!-- Tablet 768x1024 High DPI (aka iPad3") -->
        <link rel="stylesheet" media="only screen and (min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-device-pixel-ratio:2)" href="styles/tablet-1024-hdpi.css" type="text/css" />
        <style type="text/css">
            
        </style>
        
<style scoped>

.searchResults-listview .item-title {
	float: left;
	font-size: 1em;
    line-height: 1.4em;
    margin: .3em 1em 0 .6em;
    width: 80%;
}
.searchResults-listview .item-info {
	float: left;
	font-size: .7em;
	line-height: 1em;
    margin: 0 0 0 .95em;
    width: 45%;
}
    
#outstandingTasksResults-listview .item-title {
	float: left;
	font-size: 1em;
    line-height: 1.4em;
    margin: .3em 1em 0 .6em;
    width: 80%;
}
#outstandingTasksResults-listview .item-info {
	float: left;
	font-size: .7em;
	line-height: 1em;
    margin: 0 0 0 .95em;
    width: 45%;
}  
    
#clientSummaryView .item-title {
	float: left;
    width: 33%;
}
#clientSummaryView .item-info {
	float: right;
    width: 65%;
    color: #aaa;
    vertical-align : center;
}

#debts-listview .item-heading {
	font-size: .8em;
	line-height: 1.3em;
}
#debts-listview .item-title {
	float: left;
	font-size: .7em;
	line-height: 1.3em;
    color: #369;
    width: 30%;
}
#debts-listview .item-info {
	float: right;
	font-size: .7em;
	line-height: 1.3em;
    width: 65%;
}
#outstandingTasksDetailView .item-title {
	float: left;
    width: 33%;
}
    
#outstandingTasksDetailView .item-info {
	float: right;
    width: 65%;
    color: #aaa;
    vertical-align : center;
}
#entityTasks-listview .item-heading {
	font-size: .8em;
	line-height: 1.3em;
}
#entityTasks-listview .item-title {
	float: left;
	font-size: .7em;
	line-height: 1.3em;
    color: #369;
    width: 30%;
}
#entityTasks-listview .item-info {
	float: right;
	font-size: .7em;
	line-height: 1.3em;
    width: 65%;
}    
    
.details-link {
    margin-top: -1.2em;
    position: absolute;
    right: 0.6em;
    top: 50%;
}
.km-listview .km-list {
    margin: 0;
    
}


    .km-ios .debtsHeader { color: black; }
    .km-android .debtsHeader { color: white; }
        
.km-android .km-navbar .km-view-title /* After Q2 2012 SP1 */
{
    visibility: visible;
}
    
.km-android div.km-view {
    -webkit-box-direction: normal;
}
</style>
    </head>
    <body>
        
         <!-- Home Page -->
        <div data-role="view" id="tabstrip-uiinteraction" data-title="eClipse Mobile" data-init="login">
            <header data-role="header">
                <div data-role="navbar" id="navbar">
                    <p align="center">eClipse Mobile</p>
                </div>

               <div align="center">
                   <h2 align="center" id="selectedTaskText"></h2>                                            
                   <ul id="buttongroup" data-role="buttongroup" data-index="0" data-select="selectedTask">
                        <li>All</li>
                        <li>Client</li>
                        <li>Claim</li>
                        <li>Policy</li>
                    </ul>
               </div>
            </header>                                     
            <div>                                                        
            <ul data-role="listview" id="outstandingTasksResults-listview" style="height: auto;"
                data-style="inset" data-type="group">                
            </ul>
            </div>
                            <div data-role="modalview" id="modalview-login" style="width: 300px; height: 230px;">
                    <div data-role="header">
                        <div data-role="navbar">
                            <span>Login</span>
                        </div>
                    </div>
                    <ul data-role="listview" data-style="inset">
                        <li><label for="username">Username:</label> <input type="text" id="username" value='NAQTest' /></li>
                        <li><label for="password">Password:</label> <input type="password" id="password" value='1234' /></li>
                    </ul>
                <div align='center'>
                    <input id="rememberMe" type='checkbox' checked='True' /><label for="remember">Remember me</label> <br /><br />
                    <a data-click="closeModalViewLogin" id="modalview-login-button" type="button" data-role="button">Login</a>
                    <a data-click="closeModalViewLogin" id="modalview-reg-button" type="button" data-role="button">Cancel</a>
                    </div>
                </div>
        </div>
        
        <!-- Outstanding Tasks Details Page -->
        <div data-role="view" id="outstandingTasksDetailView" data-transition="slide" data-layout="default" data-show="retrieveOutstandingTasks">
            <header data-role="header">
                <div data-role="navbar">
                    <a data-role="backbutton" data-align="left">Back</a>
                    <div data-role="view-title">Task Summary</div>
                </div>
            </header>                                       
            <div data-role="content">
            </div>          
        </div>
        
        <script id="outstandingTaskDetailTemplate" type="text/x-kendo-template">
            
            <!-- For Testing  -->  
            <ul data-role="listview" data-style="inset" data-type="group">
                <li> #= ent_name#
                    <ul>
                        <li>
                            #= tas_brief_description#                        
                        </li> 
                    </ul>
                </li>
                <li>Details
                    <ul>
                        <li><span class="item-title">Date</span><span class="item-info">#= kendo.toString(tas_followup_date, "dd/MM/yyyy") #</span></li>
                        <li><span class="item-title">Ref</span><span class="item-info">#= getTaskCode(TaskType) #:#= tas_id #</span></li>                        
                        <li><span class="item-title">Priority</span><span class="item-info">#= skipIfEmpty(pri_name, true) #</span></li>                                                   
                        <li><span class="item-title">Description</span><span class="item-info">#= skipIfEmpty(tas_brief_description, true) #</span></li>                                              
                        <li><span class="item-title">Action</span><span class="item-info">#= skipIfEmpty(tas_followup_Action, true) #</span></li> 
                        <li><span class="item-title">Type</span><span class="item-info">#= TaskType#:#= TaskTypeName#</span></li> 
                        <li><span class="item-title">Description</span><span class="item-info">#= skipIfEmpty(tasstaty_name, true) #</span></li>
                        <li><span class="item-title">Contact</span><span class="item-info">#= skipIfEmpty(tas_contact_person, true) #</span></li>                           
                        <li><span class="item-title">Notes</span><span class="item-info">#= skipIfEmpty(tas_notes, true) #</span></li>
                        <li><span class="item-title">Doc</span><span class="item-info">#= skipIfEmpty(tas_contact_person, true) #</span></li>
                        <li><span class="item-title">Queue</span><span class="item-info">#= skipIfEmpty(tas_queue, true) #</span></li>
                    </ul>
                </li>
            </ul>                                
        </script>        
        
        <div data-role="view" id="tabstrip-home" data-title="eClipse Mobile">
            <header data-role="header">
                <div data-role="navbar" id="navbar">
                    <p align="center">eClipse Mobile</p>
                </div>
                <div >
                
                    <input type="text" style="width:100px" placeholder="Search" id="txtName" validationmessage="Please enter {0}" class="k-textbox">
                        
                    <select data-role="dropdownlist" id="searchType" class="k-input">
                        <option value="Client">Client</option>
                        <option value="Task">Task</option>
                        <option value="Claim">Claim</option>
                    </select>

                    <a id="submitButton" data-role="button" data-click="eclipseSearch" data-icon="search"></a>
                </div>
    
            </header>            

            <div class='searchResults-listview'>
                <ul data-role="listview" id="clientResults-listview" style="height: auto;"
                        data-style="inset" data-type="group">
                </ul>
                <ul data-role="listview" id="taskResults-listview" style="height: auto;"
                        data-style="inset" data-type="group">
                </ul>
                <ul data-role="listview" id="claimResults-listview" style="height: auto;"
                        data-style="inset" data-type="group">
                </ul>
            </div>
        </div>
                        
        <div data-role="view" id="tabstrip-geolocation" data-title="" data-init="announcementListViewTemplatesInit">
			<div data-role="content">
                <div id="searchResults">
                    <ul data-role="listview" id="searchResults-listview" 
                        data-style="inset" data-type="group">
                    </ul>
                </div>
            </div>
        </div>

        <div data-role="layout" data-id="mobile-tabstrip">
            <header data-role="header">
                <div data-role="navbar">
                    <span data-role="view-title"></span>
                </div>
            </header>
               
            <div data-role="footer">
                <div data-role="tabstrip">
                    <a href="#tabstrip-uiinteraction" data-icon="home">Home</a>
                    <a href="#tabstrip-home" data-icon="search">Search</a>
                    <a href="#tabstrip-geolocation" data-icon="globe">Geolocation</a>
                </div>
            </div>            
        </div>
        
        <!-- Client Summary Page -->
        <div data-role="view" id="clientSummaryView" data-transition="slide" data-layout="default" data-show="retrieveClient">
            <header data-role="header">
                <div data-role="navbar">
                    <a data-role="backbutton" data-align="left">Back</a>
                    <div data-role="view-title">Client Summary</div>
                </div>
            </header>
            <div align="center">
                <a data-role="button" href="#debtsView">Debts</a>
                <a data-role="button" href="#tasksView">Tasks</a>
                <a data-role="button">Claims</a>
                <a data-role="button">Notes</a>
            </div>
            <div data-role="content">
            </div>
        </div>
                     
        <script id="detailTemplate" type="text/x-kendo-template">
                     
            <ul data-role="listview" data-style="inset" data-type="group">
                <li>#= ent_name + ((ent_suburb == null || ent_suburb == '') ? '' : ', ' + ent_suburb) #
                    <ul>
                         <li>
                            #= ((ent_trading_as == null || ent_trading_as == '') ? '' : 't/as ' + ent_trading_as + '<br />') #
                            #= skipIfEmpty(ent_addressee, true) #
                            #= skipIfEmpty(ent_address_1, true) #
                            #= skipIfEmpty(ent_address_2, true) #
                            #= skipIfEmpty(ent_address_3, true) #
                            #= skipIfEmpty(ent_suburb, true) #
                            #= skipIfEmpty(ent_postcode, true) #        
                        </li>
                    </ul>
                </li>
                <li>Details
                    <ul>
                         <li><span class="item-title">Contact</span><span class="item-info">#= skipIfEmpty(ent_contact) #</span></li>
                         <li><span class="item-title">Job Title</span><span class="item-info">#= skipIfEmpty(ent_job_title) #</span></li>
                         <li><span class="item-title">Salutation</span><span class="item-info">#= skipIfEmpty(ent_salutation) #</span></li>
                         <li><span class="item-title">Web</span><span class="item-info">#= skipIfEmpty(ent_web_site) #</span></li>
                         <li><span class="item-title">Email</span><span class="item-info">#= skipIfEmpty(ent_email) #</span></li>
                         <li><span class="item-title">Classification</span><span class="item-info">#= skipIfEmpty(ent_abn) #</span></li>
                         <li><span class="item-title">ABN</span><span class="item-info">#= skipIfEmpty(ent_abn) #</span></li>
                    </ul>
                </li>
                <li>Phone
                    <ul>
                         <li><span class="item-title">Main Phone</span><span class="item-info">#= skipIfEmpty(ent_telephone) #</span></li>
                         <li><span class="item-title">Other Phone</span><span class="item-info">#= skipIfEmpty(ent_telephone_2) #</span></li>
                         <li><span class="item-title">Mobile</span><span class="item-info">#= skipIfEmpty(ent_mobile) #</span></li>
                         <li><span class="item-title">Fax</span><span class="item-info">#= skipIfEmpty(ent_facsimile) #</span></li>
                    </ul>
                </li>
            </ul>
                
        </script>
                     
        <!-- Debts Page -->
        <div data-role="view" id="debtsView" data-transition="slide" data-layout="default" data-show="retrieveDebts">
            <header data-role="header">
                <div data-role="navbar">
                    <a data-role="backbutton" data-align="left">Back</a>
                    <div data-role="view-title">Debts</div>
                </div>
                <div>
                        <h2 align='center' id="Debtor" class="debtsHeader"></h2>
                        <h4 align='center' id="DebtsBalance" class="debtsHeader"></h4>
                </div>
            </header>
            <div data-role="content">
                <ul data-role="listview" id="debts-listview" style="height: auto;"
                        data-style="inset" data-type="group">
                </ul>
            </div>
        </div>
                        
         <!-- Tasks Page -->
        <div data-role="view" id="tasksView" data-transition="slide" data-layout="default" data-show="retrieveEntityTasks">
            <header data-role="header">
                <div data-role="navbar">
                    <a data-role="backbutton" data-align="left">Back</a>
                    <div data-role="view-title">Tasks</div>
                </div>
            </header>
            <div>
                <ul id="buttongroup" data-role="buttongroup" data-index="0" data-select="selectedEntityTask">
                        <li>All</li>
                        <li>Client</li>
                        <li>Claim</li>
                        <li>Policy</li>
                    </ul>
                <ul data-role="listview" id="entityTasks-listview" style="height: auto;"
                        data-style="inset" data-type="group">
                </ul>
            </div>
        </div>
                        
        <script>
            var app = new kendo.mobile.Application(document.body, { transition: "slide", layout: "mobile-tabstrip" });
            
             $(document).ready(function(){

                     });

        </script>
                                
        <script type="text/x-kendo-template" id="debts-listview-template">
           
            <ul data-role="listview" data-style="inset" data-type="group">
                  <li><span class="item-heading">${gencob_name} - ${gentrans_name}</span>
                      #= HasTask == 1 ? '<img src="images/calendar_redtotal.png" />' : '' #
                      #= ClaimStatus == 1 ? '<img src="images/flag_red.png" />' : '' #
                      #= ClaimStatus == 0 ? '<img src="images/flag_green.png" />' : '' #
                      #= status_desc == 'Submitted' ? '<img src="images/Prem_Fund_Submitted.png" />' : '' #
                  <ul>
                      <li><span class="item-title">Date</span><span class="item-info">#= kendo.toString(pol_date_effective, "dd/MM/yyyy") #</span></li>
                            <li><span class="item-title">Details</span><span class="item-info">#= skipIfEmpty(genins_name) + ' ' #
                        #= skipIfEmpty(Insurer) + ': Policy no. ' #
                        #= skipIfEmpty(genins_policy_number, true, 'TBC') #</span></li>
                         <li><span class="item-title">Inv No</span><span class="item-info">#= pol_tran_id #</span></li>
                         <li><span class="item-title">Invoiced</span><span class="item-info">#= formatNum(pol_total_gross_premium, true) #</span></li>
                         <li><span class="item-title">Paid</span><span class="item-info">#= formatNum(Paid, true) #</span></li>
                         <li><span class="item-title">Balance</span><span class="item-info">#= formatNum(bal_amount, true) #</span>     </li>                 
                            
                   </ul>    
             </ul>               
                 
        </script>
        
         <script type="text/x-kendo-template" id="entityTasks-listview-template">
               
              <ul data-role="listview" data-style="inset" data-type="group"> 
                <li><span class="item-heading">${tas_brief_description}</span>
            
                 <ul>
                      <li><span class="item-title">Date</span><span class="item-info">#= kendo.toString(tas_followup_date, "dd/MM/yyyy") #</span> </li>   
                      <li><span class="item-title">Priority</span><span class="item-info">#= pri_name#</span> </li>    
                      <li><span class="item-title">Ref</span><span class="item-info">#= getTaskCode(TaskType) #:#= tas_id #</span></li>
                      <li><span class="item-title">Policy</span><span class="item-info">#= skipIfEmpty(genins_name, true) #</span></li>  
                      <li><span class="item-title">Task</span><span class="item-info">#= TaskTypeName#</span></li>   
                      <li><span class="item-title">Description</span><span class="item-info">#= skipIfEmpty(tas_followup_Action, true) #</span></li>                  
                      <li><span class="item-title">Follow up</span><span class="item-info">#= skipIfEmpty(tas_followup_Action, true) #</span></li>                                           
                      <li><span class="item-title">Type</span><span class="item-info">#= TaskType#</span></li>                    
                      <li><span class="item-title">Status</span><span class="item-info">#= tasstaty_name#</span></li>                    
                      <li><span class="item-title">Contact</span><span class="item-info">#= tas_contact_person#</span> </li>                    
                      <li><span class="item-title">Notes</span><span class="item-info">#= tas_notes#</span> </li>                    
                      <li><span class="item-title">Queue</span><span class="item-info">#= tas_queue#</span> </li>                                                         
                      <li><span class="item-title">Doc</span><span class="item-info"></span></li>                    
                   </ul>
              </ul>                                        
                                
        </script>        
       
        
        <script type="text/x-kendo-template" id="clientSearchResults-listview-template">
            <a
            class="details-link"
            data-role="listview-link"
            href="\#clientSummaryView?id=#:ent_id#">
            
            <h3 class="item-title">${ent_name}</h3>
                <div>
                    <p class="item-info">
                        #= skipIfEmpty(ent_address_1, true) #
                        #= skipIfEmpty(ent_address_2, true) #
                        #= skipIfEmpty(ent_address_3, true) #
                        #= skipIfEmpty(ent_suburb, true) #
                        #= skipIfEmpty(ent_postcode, true) #
                    </p>
                </div>
                <div>
                    <p class="item-info">
                        #= skipIfEmpty(ent_telephone) #
                    </p>
                    <p class="item-info">
                        #= skipIfEmpty(ent_mobile) #
                    </p>
                    <p class="item-info">
                        #= skipIfEmpty(ent_email) #
                    </p>
                </div>
            </a>
        </script>
        
        <script type="text/x-kendo-template" id="taskSearchResults-listview-template">
             <h3 class="item-title">${TaskType} Task ${tas_id} - ${TaskTypeName}</h3>
                <div>
                    <p class="item-info">
                        ${ent_name}
                    </p>
                    <p class="item-info">
                         Follow up Action
                    </p>
        
                </div>
                <div>
                    <p class="item-info">
                         ${tas_brief_description}
                    </p>
                    <p class="item-info">
                        ${tas_followup_Action}
                    </p>
        
                </div>
           
        </script>
       
                        
        <script type="text/x-kendo-template" id="claimSearchResults-listview-template">
             <h3 class="item-title">Claim ID ${ClaId} - ${Client_Name}</h3>
                <div>
                    <p class="item-info">
                        ${Insurer}
                    </p>
                    <p class="item-info">
                         Ref: ${cla_insurer_reference}
                    </p>
        
                </div>
                <div>
                    <p class="item-info">
                         ${cla_brief_description}
                    </p>
                    <p class="item-info">
                        Situation/Reg No: ${cla_sit_reg}
                    </p>
        
                </div>
            
        </script>
               
         <script type="text/x-kendo-template" id="outstandingTasksResults-listview-template">          
             <a
              class="details-link"
              data-role="listview-link"
              href="\#outstandingTasksDetailView?tas_id=#:tas_id#">               
             
                  <h3 class="item-title">${tas_brief_description}</h3>  
                  <div>
                            <p class="item-info">
                               <span> ${ent_name} </span>
                            </p>
                            <p class="item-info">
                                Date: #= kendo.toString(tas_followup_date, "dd/MM/yyyy") #                                       
                            </p>
                            <p class="item-info"> 
                                 Priority: ${pri_name}
                            </p>    
                           <p class="item-info">&nbsp;</p>
                            #= getTaskType(TaskType) #  
                           
                            
                   </div>    
             </a>
        </script>                                                                                  
    </body>
</html>
